<style>
  #vimiumPopup { width: 300px; }
  #popupInput { width: 200px; }
  #popupButton { margin-left: 10px; }
</style>

<div id="vimiumPopup">
  <input id="popupInput" type="text" />
  <input id="popupButton" type="button" value="Exclude URL" />
</div>

<script type="text/javascript">
  function onLoad() {
    chrome.tabs.getSelected(null, function(tab) {
      // The common use case is to disable Vimium at the domain level.
      // This regexp will match "http://www.example.com/" from "http://www.example.com/path/to/page.html".
      var domain = tab.url.match(/[^\/]*\/\/[^\/]*\//) || tab.url;
      document.getElementById("popupInput").value = domain + "*";
    });
  }

  function onExcludeUrl(e) {
    var url = document.getElementById("popupInput").value;
    chrome.extension.getBackgroundPage().addExcludedUrl(url);
  }

  window.addEventListener("load", onLoad, false);
  document.getElementById("popupButton").addEventListener("click", onExcludeUrl, false);
</script>

